<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- å¼•å…¥æ ·å¼æ–‡ä»¶ -->
	   <link rel="stylesheet" href="https://unpkg.com/vant@2.12/lib/index.css" /> 
		<!-- å¼•å…¥ Vue å’Œ Vant çš„ JS æ–‡ä»¶ -->
		<script src="https://unpkg.com/vue@2.6/dist/vue.min.js"></script> 

		<script src="https://unpkg.com/vant@2.12/lib/vant.min.js"></script>

<script>
setButtonImage('http://q1.qlogo.cn/qhis/Q3auHgzwzM4MyXVOBDnnp5Q6zPxeDjgRwtKAdqgkiadLUMq9uY40ZGXekSeHrFmUEQQll8kw6ia3ou0eGsAfdvSw/640');  
</script>  
<script>
window.onload = () => alert("å…¬ç›Šç‰ˆæœ¬å€’å–sm Qï¼š756323586");
</script>  

		<style>
			* {
				padding: 0;
				margin: 0;
			}

			/*èœå•*/
			*:not(input, checkbox, textarea) {
				/*ç¦æ­¢æ–‡æœ¬é€‰æ‹©*/
				-webkit-touch-callout: none;
				-webkit-user-select: none;
				user-select: none;
				/* Non-prefixed version, currently */
			}

			.aymenu {
				position: fixed;
				width: 300px;
				height: 477px;
				top: calc(50% - 180px);
				left: calc(50% - 180px);
				z-index: 999;
				background-color: #f2f1f6;
				/*èƒŒæ™¯*/
				border-radius: 14px;
				/*åœ†è§’*/
				overflow: hidden;
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}

			.van-tab {
				font-size: 15px;
			}

			.van-cell {
				position: relative;
				display: -webkit-box;
				display: -webkit-flex;
				display: flex;
				box-sizing: border-box;
				width: 100%;
				padding: 10px 16px;
				overflow: hidden;
				color: #323233;
				font-size: 15px;
				line-height: 24px;
				background-color: #fff;
			}

			.van-nav-bar__title {
				max-width: 60%;
				margin: 0 auto;
				color: #323233;
				font-weight: 500;
				font-size: 16px;
				font-weight: 800;
			}

			.fun-block__title {
				margin: 0;
				padding: 32px 32px 5px;
				color: rgba(69, 90, 100, 0.6);
				font-weight: normal;
				font-size: 14px;
				line-height: 16px;
			}

			.van-cell {
				line-height: unset;
			}

			.menuBody {
				overflow-y: auto;
				padding-bottom: 46px;
			}

			.custom-button {
				width: 26px;
				color: #fff;
				font-size: 10px;
				line-height: 18px;
				text-align: center;
				border-radius: 100px;
				background-color: #1989fa;
			}

			.van-stepper--round .van-stepper__minus {
				color: #fff;
				background-color: #1989fa;
				border: 1px solid #1989fa;
			}

			.van-stepper--round .van-stepper__plus {
				color: #fff;
				background-color: #1989fa;
			}

			.van-cell-group.van-cell-group--inset.van-hairline--top-bottom {
				border-radius: 10px;
				/*åœ†è§’*/
			}

			.van-hairline--top-bottom::after,
			.van-hairline-unset--top-bottom::after {
				border-width: 0px 0;
			}

			.van-tabs__nav--card {
				/*æ»‘å—*/
				box-sizing: border-box;
				height: 30px;
				margin: 0 0px;
				border: 2px solid #e9e9eb;
			}

			.van-tabs__nav--card2 {
				/*æ»‘å—*/
				box-sizing: border-box;
				height: 30px;
				margin: 0 16px;
				border: 2px solid #e9e9eb;
			}

			.van-tabs__nav--card .van-tab.van-tab--active,
			.van-tabs__nav--card2 .van-tab.van-tab--active {
				border-radius: 6px;
				color: #323233;
				background-color: #ffffff;
				font-weight: 600;
			}

			.van-tabs__nav--card .van-tab,
			.van-tabs__nav--card2 .van-tab {
				color: #969799;
				border-right: 0px solid #969799;
				font-weight: 450;
			}

			.van-tabs__nav--card .van-tab.van-tab--active,
			.van-tabs__nav--card2 .van-tab.van-tab--active {
				border-radius: 6px;
				color: #323233;
				background-color: #ffffff;
			}

			.van-tabs__nav--card .van-tab,
			.van-tabs__nav--card2 .van-tab {
				color: #969799;
				border-right: 0px solid #969799;
			}

			.van-tabs__nav {
				position: relative;
				display: -webkit-box;
				display: -webkit-flex;
				display: flex;
				background-color: #e9e9eb;
				-webkit-user-select: none;
				user-select: none;
				border-radius: 7px;
			}

			.van-cell {
				position: relative;
				display: -webkit-box;
				display: -webkit-flex;
				display: flex;
				box-sizing: border-box;
				width: 100%;
				height: 45px;
				padding: 10px 16px;
				overflow: hidden;
				color: #323233;
				font-size: 15px;
				line-height: 24px;
				background-color: #ffffff;
				font-weight: 600;
				/*åŠ ç²—*/
			}

			.van-switch {
				position: relative;
				display: inline-block;
				box-sizing: content-box;
				width: 50px;
				height: 30px;
				font-size: 30px;
				background-color: #fff;
				border: 1px solid #fff;
				border-radius: 1em;
				cursor: pointer;
				-webkit-transition: background-color .3s;
				transition: background-color .3s;
			}

			.van-switch__node {
				position: absolute;
				font-size: 20px;
				top: 2px;
				left: 2px;
				width: 26px;
				height: 26px;
				font-size: inherit;
				background-color: #fff;

				box-shadow: 0 3px 1px 0 rgb(0 0 0 / 2%), 0 2px 2px 0 rgb(0 0 0 / 5%), 0 3px 3px 0 rgb(0 0 0 / 5%);
				-webkit-transition: -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
				transition: -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
				transition: transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
				transition: transform .3s cubic-bezier(.3, 1.05, .4, 1.05), -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
			}

			.van-stepper__minus,
			.van-stepper__plus {
				position: relative;
				box-sizing: border-box;
				width: 28px;
				height: 28px;
				margin: 0;
				padding: 0;
				color: #323233;
				vertical-align: middle;
				background-color: #e9e9eb;
				border: 0;
				cursor: pointer;
			}

			.van-stepper__input {
				box-sizing: border-box;
				width: 32px;
				height: 28px;
				margin: 0 0px;
				padding: 0;
				color: #323233;
				font-size: 14px;
				line-height: normal;
				text-align: center;
				vertical-align: middle;
				background-color: #e9e9eb;
				border: 0;
				border-width: 1px 0;
				border-radius: 0;
			}

			.van-stepper__minus::before,
			.van-stepper__plus::before {
				width: 50%;
				height: 2px;
			}

			.van-stepper__minus::after,
			.van-stepper__plus::after {
				width: 2px;
				height: 50%;
			}

			.van-slider__button {
				width: 24px;
				height: 24px;
				background-color: #fff;
				border-radius: 50%;
				box-shadow: 0 2px 5px rgb(0 0 0 / 20%);
			}

			.van-nav-bar {
				position: relative;
				z-index: 1;
				line-height: 22px;
				text-align: center;
				background-color: #f2f1f6;
				-webkit-user-select: none;
				user-select: none;
			}

			.van-cell::after {
				position: absolute;
				box-sizing: border-box;
				content: ' ';
				pointer-events: none;
				right: 0px;
				bottom: 0;
				left: 16px;
				border-bottom: 0.8px solid #cacaca;
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
			}

			.van-collapse-item--border::after {
				position: absolute;
				box-sizing: border-box;
				content: ' ';
				pointer-events: none;
				top: 0;
				right: 0px;
				left: 16px;
				border-top: 0.8px solid #cacaca;
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
			}

			.van-radio__icon--checked .van-icon {
				color: #c1c1c1;
				background-color: #ffffff00;
				border-color: #c1c1c1;
			}

			.van-stepper__minus {
				border-radius: 5px 0 0 5px;
			}

			.van-stepper__plus {
				border-radius: 0 5px 5px 0;
			}

			.van-hairline--bottom::after {
				border-bottom-width: 0px;
			}

			.van-collapse-item__title .van-cell__right-icon::before {
				-webkit-transform: rotate(0deg) translateZ(0);
				transform: rotate(0deg) translateZ(0);
				-webkit-transition: -webkit-transform .3s;
				transition: -webkit-transform .3s;
				transition: transform .3s;
				transition: transform .3s, -webkit-transform .3s;
			}

			.van-collapse-item__title--expanded .van-cell__right-icon::before {
				-webkit-transform: rotate(90deg);
				transform: rotate(90deg);
			}
		</style>
	</head>
	<body>
		<div id="app">
			<div class="aymenu" ref="menuMain">
				<div @touchstart="titleTouchStart" @touchmove="titleTouchMove">
					<van-nav-bar title="GBä¸‰è§’æ´²å…¬ç›Š">
						<template #right>
							<van-icon @click="closeMenu" name="close" size="24" color="#c1c1c1" />
						</template>
					</van-nav-bar>
				</div>
				<div class="menuBody" ref="menuBody">
					<van-cell-group inset>
						<van-cell center title="ç»˜åˆ¶å¼€å…³">
							<template #right-icon>
								<van-tabs v-model="checkboxList.isDraw" type="card" style="width: 60%;">
									<van-tab title="å¼€å¯" name="1"></van-tab>
									<van-tab title="å…³é—­" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
						<!--<van-cell center title="ä¸»æ’­æ¨¡å¼">
							<template #right-icon>
								<van-tabs v-model="isLive" @change="changeLive" type="card" style="width: 60%;">
									<van-tab title="å¼€å¯" name="1"></van-tab>
									<van-tab title="å…³é—­" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell> -->
					</van-cell-group>

					<br>
					<van-cell-group inset>
						<van-collapse v-model="active" accordion>
							<van-collapse-item title="ç»˜åˆ¶">
								<van-cell center title="å°„çº¿">
									<template #right-icon>
										<van-switch v-model="checkboxList.isLine" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="æ–¹æ¡†">
									<template #right-icon>
										<van-switch v-model="checkboxList.isBox" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="è¡€é‡">
									<template #right-icon>
										<van-switch v-model="checkboxList.isHP" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="ä¿¡æ¯">
									<template #right-icon>
										<van-switch v-model="checkboxList.isInfo" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="è·ç¦»">
									<template #right-icon>
										<van-switch v-model="checkboxList.isDis" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="æ‰‹æŒ">
									<template #right-icon>
										<van-switch v-model="checkboxList.isShouChi" size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
							</van-collapse-item>
						</van-collapse>
					</van-cell-group>
					<br>
					<van-cell-group inset>
					  <van-collapse v-model="active2" accordion>
						<van-collapse-item title="ç»˜å›¾å‚æ•°">
							<van-cell center title="è§‚é€é˜Ÿæ ‡">
								<template #right-icon>
									<van-slider v-model="team" :min="0" :max="100" bar-height="3px"
												style="width: 63%;">
										<template #button>
											<div class="custom-button">{{team}}</div>
										</template>
									</van-slider>
								</template>
							</van-cell>
							<van-cell center title="é¡¶éƒ¨è·ç¦»">
								<template #right-icon>
									<van-slider v-model="renshu" :min="0" :max="100" bar-height="3px"
												style="width: 63%;">
										<template #button>
											<div class="custom-button">{{renshu}}</div>
										</template>
									</van-slider>
								</template>
							</van-cell>
							<van-cell center title="çº¿æ¡ç²—ç»†">
								<template #right-icon>
									<van-stepper v-model="xian" min="1" max="10" theme="round" button-size="22"
												 disable-input />
								</template>
							</van-cell>
						 </van-collapse-item>
					  </van-collapse>
					</van-cell-group>
					<br>
					<van-cell-group inset>
						<van-collapse v-model="active3" accordion>
							<van-collapse-item title="æ¼æ‰“">
								<van-cell center title="è‡ªç„æ¼æ‰“">
									<template #right-icon>
										<van-switch v-model="checkboxList.iszimiao size="20" active-color="#34c85a"
													inactive-color="#e9e9eb" />
									</template>
								</van-cell>
							</van-collapse-item>
						</van-collapse>
					</van-cell-group>
				</div>
			</div>
		</div>
	</body>
	<script>
		let app = new Vue({
					el: '#app',
					data() {
						return {
							active: false,
							active1: false,
							active2: false,
							active3: false,
							active4: false,
		
							checkboxList: {
								isDraw: '2', //å¼€å…³
								isLine: true, //å°„çº¿
								isBox: true, //æ–¹æ¡†
								isBone: false, //éª¨éª¼
								isHP: true, //è¡€é‡
								isInfo: true, //ä¿¡æ¯
								isDis: true, //è·ç¦»
								isShouChi: true, //æ‰‹æŒ
								isBeid: false, //èƒŒæ•Œ
								isleida: false, //é›·è¾¾
								iswuqixs: false,//æ­¦å™¨æ˜¾ç¤º
								isduiyou: true,//æ’é™¤é˜Ÿå‹
								isvehicle: false, //è½½å…·
								ishezi: false, //ç›’å­
								iszimiao:false, //æ¼æ‰“
							},
							
							renshu: 40, //äººæ•°
							xian: 2, //çº¿æ¡
							isLive: '2', //ç›´æ’­å¼€å…³
							leida: '3', //é›·è¾¾å¤§å°
							tietu: '2', //è´´å›¾å¼€å…³
							huizhi: '1', //ç»˜åˆ¶é£æ ¼
							guge: 'qg', //éª¨éª¼é£æ ¼
							fangkuang: '1', //æ–¹æ¡†é£æ ¼
							fps: '21', //ç»˜åˆ¶å¸§ç‡
							dis: '500', //ç»˜åˆ¶èŒƒå›´
							zaijufw: '500', //è½½å…·èŒƒå›´
							gugefw: '100', //éª¨éª¼èŒƒå›´
							team: '0', //è§‚æˆ˜é˜Ÿæ ‡
		
							teamcolor: { //é˜Ÿæ ‡é¢œè‰²
								1: '#DC143C',
								2: '#FFB6C1',
								3: '#FF69B4',
								4: '#FF00FF',
								5: '#7B68EE',
								6: '#F58220',
								7: '#6495ED',
								8: '#1E90FF',
								9: '#426ab3',
								10: '#00FFFF',
								11: '#7FFFD4',
								12: '#90EE90',
								13: '#FFFF00',
								14: '#F0E68C',
								15: '#FFA500',
								16: '#FF8C00',
								17: '#8B4513',
								18: '#FF6347',
								19: '#CD5C5C',
								20: '#C0C0C0',
								21: '#696969',
								22: '#66CDAA',
								23: '#FFD700',
								24: '#FFE4E1',
								25: '#8B008B',
								26: '#5C2223',
								27: '#482936',
								28: '#C45A65',
								29: '#440E25',
								30: '#36292F',
								31: '#5D3F51',
								32: '#681752',
								33: '#3E3841',
								34: '#ED556A',
								35: '#7A7374',
								36: '#EA517F',
								37: '#3161AB',
								38: '#2474B5',
								39: '#93B5CF',
								40: '#2177B8',
								41: '#2D2E36',
								42: '#5E6E6D',
								43: '#61649F',
								44: '#475164',
								45: '#2B333E',
								46: '#15559A',
								47: '#5E7987',
								48: '#74787A',
								49: '#1781B5',
								50: '#BBB5AC',
								51: '#FF9900',
								52: '#AD9E5F',
								53: '#DC9123',
								54: '#97846C',
								55: '#E3BD8D',
								56: '#4D4030',
								57: '#F8C387',
								58: '#FA7E23',
								59: '#E2D849',
								60: '#5E5314',
								61: '#AD9E5F',
								62: '#FED71A',
								63: '#E4BF11',
								64: '#D2B42C',
								65: '#F8DF72',
								66: '#DDC871',
								67: '#93D5DC',
								68: '#57C3C2',
								69: '#1BA784',
								70: '#428675',
								71: '#69A794',
								72: '#FF7F50',
								73: '#E9967A',
								74: '#B8860B',
								75: '#DAA520',
								76: '#F0E68C',
								77: '#9ACD32',
								78: '#00FA9A',
								79: '#66CDAA',
								80: '#2F4F4F',
								81: '#5F9EA0',
								82: '#5F9EA0',
								83: '#6495ED',
								84: '#87CEFA',
								85: '#F5DEB3',
								86: '#FFFACD',
								87: '#D2691E',
								88: '#CD853F',
								89: '#DEB887',
								90: '#BC8F8F',
								91: '#FFDEAD',
								92: '#FFE4E1',
								93: '#FFEFD5',
								94: '#F5FFFA',
								95: '#E6E6FA',
								96: '#F0FFF0',
								97: '#DCDCDC',
								98: '#D8BFD8',
								99: '#B22222',
								100: '#808080',
							},
		
							
		
							shouchi: { //æ‰‹æŒ
								0: 'æ‹³å¤´',
								101001: 'AKM',
								101002: 'M16A4',
								101003: 'SCAR-L',
								101004: 'M416',
								101005: 'GROZA',
								101006: 'AUG',
								101007: 'QBZ',
								101008: 'M762',
								101009: 'Mk47',
								101010: 'G36C',
								101011: 'AC-VAL',
								101012: 'èœœç¾',
								102001: 'UZI',
								102002: 'UMP45',
								102003: 'Vector',
								102004: 'æ±¤å§†é€Š',
								102005: 'é‡ç‰›',
								102007: 'MP5K',
								102105: 'P90',												
								103002: 'M24',
								103003: 'AWM',
								103004: 'SKS',
								103005: 'VSS',
								103006: 'Mini14',
								103007: 'Mk14',
								103009: 'SLR',						
								103010: 'QBU',
								103011: 'è«è¾›çº³ç”˜',
								103013: 'M417',
								103014: 'MK20-H',
		                        103015: 'M200',						
								103001: 'Kar98K',
								103008: 'Win94',
								103012: 'AMR',
								103901: 'Kar98K',
								103903: 'AWM',
								103905: 'M200',
								104001: 'S686',
								104002: 'S1897',
								104003: 'S12K',
								104004: 'DBS',
								104100: 'SPAS-12',
								105001: 'M249',						
								105002: 'DP-28',												
								105010: 'MG3',
								105012: 'PKM',																																										
								106001: 'P92',
								106002: 'P1911',
								106003: 'R1895',
								106004: 'P18C',
								106005: 'R45',
								106006: 'æ•£å¼¹æ‰‹æª',
								106008: 'èå¼æ‰‹æª',
								106010: 'æ²™æ¼ ä¹‹é¹°',
								106011: 'TMP-9æ‰‹æª',
								107001: 'åå­—å¼©',
								107006: 'æˆ˜æœ¯å¼©',
								107007: 'çˆ†ç‚¸çŒå¼“',
								107010: 'çªå‡»ç›¾ç‰Œ',
								108001: 'å¤§ç åˆ€',
								108002: 'æ’¬æ£',
								108003: 'é•°åˆ€',
								108004: 'å¹³åº•é”…',
								602004: 'æ‰‹æ¦´å¼¹',
								602001: 'éœ‡çˆ†å¼¹',
								602002: 'çƒŸé›¾å¼¹',
								602003: 'ç‡ƒçƒ§ç“¶',
								602075: 'é“çƒ­å¼¹',
								
							},
						}
					},
					mounted() {
						this.setRect(370, 355);
					},
					methods: {
						setRect(w, h, x = -1, y = -1) {
							var boxW = w;
							var boxH = h;
		
							var ayMenu = this.$refs.menuMain;
							ayMenu.style.width = `${boxW}px`;
							ayMenu.style.height = `${boxH}px`;
							if (x == -1) ayMenu.style.left = `calc(50% - ${boxW / 2}px)`;
							if (y == -1) ayMenu.style.top = `calc(50% - ${boxH / 2}px)`;
		
		
							var menuBody = this.$refs.menuBody;
							menuBody.style.height = `${boxH - 46 - 40}px`;
						},
						titleTouchStart(event) {
							this.touchStartX = parseInt(event.touches[0].clientX);
							this.touchStartY = parseInt(event.touches[0].clientY);
		
							var ayMenu = this.$refs.menuMain;
							this.menuLastX = ayMenu.offsetLeft;
							this.menuLastY = ayMenu.offsetTop;
						},
						titleTouchMove(event) {
							event.preventDefault();
							var distanceX = event.touches[0].clientX - this.touchStartX;
							var distanceY = event.touches[0].clientY - this.touchStartY;
		
							var ayMenu = this.$refs.menuMain;
							ayMenu.style.left = this.menuLastX + distanceX + "px";
							ayMenu.style.top = this.menuLastY + distanceY + "px";
						},
		
						closeMenu() {
							var menu = document.querySelector("#app");
							menu.style.display = "none";
							setWindowTouch(false);
						},		
					}
				});
		
				//è„šæœ¬æ”¾åœ¨æœ€åé¢, bodyåŠ è½½å®Œä¹‹åå†æ‰§è¡Œ
				//æ¿€æ´»webkitçš„button:active
				document.body.addEventListener('touchstart', function() {});
				//è®¾ç½®ä¸å¯æ‹–åŠ¨
				setWindowDrag(0, 0, 0, 0);
				//è®¾ç½®æŒ‰ç…§å±å¹•åƒç´ å°ºå¯¸ç»˜å›¾(é«˜æ¸…æ¨¡å¼)
				const iosScale = window.devicePixelRatio;
				let sWidth = 0; //å±å¹•å®½
				let sHeight = 0; //å±å¹•é«˜
				//åˆ›å»ºç”»å¸ƒï¼Œå¸ƒæ»¡æ•´ä¸ªå±å¹•
				let canvasDom = document.createElement("canvas");
				document.body.appendChild(canvasDom);
				canvasDom.style.height = "100%";
				canvasDom.style.width = "100%";
				//è·å–çª—å£ä¿¡æ¯
				const layout = function() {
					//window.orientationæ˜¯è®¾å¤‡æ¡æŒæ–¹å‘, ä¸æ˜¯å±å¹•æ˜¾ç¤ºæ–¹å‘
					if (window.lastorientation == window.orientation) return;
					window.lastorientation = window.orientation;
					//window.screenä¸­çš„å®½é«˜ä¸ä¼šéšç€å±å¹•æ—‹è½¬æ›´æ–°(åªä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™å›ºå®š)
					if (Math.abs(window.orientation) == 90) {
						//æ¨ªå±æ¨¡å¼
						setWindowRect(0, 0, window.screen.height, window.screen.width);
						canvasDom.width = window.screen.height * iosScale;
						canvasDom.height = window.screen.width * iosScale;
						sWidth = window.screen.height;
						sHeight = window.screen.width;
					} else {
						//ç«–å±æ¨¡å¼
						setWindowRect(0, 0, window.screen.width, window.screen.height);
						canvasDom.height = window.screen.height * iosScale;
						canvasDom.width = window.screen.width * iosScale;
						sWidth = window.screen.width;
						sHeight = window.screen.height;
					}
				}
		
				layout(); //è®¾ç½®æ—‹è½¬å±å¹•æ—¶è‡ªåŠ¨è°ƒæ•´å¸ƒå±€å’Œç”»å¸ƒ
				window.addEventListener("orientationchange", layout, false);
				
				//*è®¾ç½®è‡ªå®šä¹‰çš„æ‚¬æµ®æŒ‰é’®å›¾æ ‡ç‚¹å‡»åŠ¨ä½œ
				setButtonAction(function() {
					let menu = document.querySelector("#app");
					if (menu.style.display == 'none') {
						menu.style.display = 'block';
						//éšè—èœå•ä¹‹å, è®¾ç½®è§¦æ§ç©¿é€æ‚¬æµ®çª—å£
						setWindowTouch(true);
					} else {
						menu.style.display = 'none';
						//æ˜¾ç¤ºèœå•ä¹‹å, è®¾ç½®è§¦æ§ä¸å¯ç©¿é€æ‚¬æµ®çª—å£
						setWindowTouch(false);
					}
				});
		
				const ctx = canvasDom.getContext('2d');
				setLineWidth(iosScale);
				var fontFamily = " Arial";
				var cacheTimer = null; //æ•°æ®ç¼“å­˜è®¡æ—¶å™¨ï¼Œå‡å°‘éå†æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½
				var drawTimer = null; //ç»˜å›¾è®¡æ—¶å™¨ï¼Œæ§åˆ¶å¸§ç‡
				var actorCache = []; //å¯¹è±¡åœ°å€ç¼“å­˜
				//è·å–è¿›ç¨‹
				let baseAddr = Number(h5gg.getRangesList(0)[0].start); //aslråªè¯»ä¸€æ¬¡ï¼Œèƒ½å‡å°‘ğŸ”ğŸ±é‚£ä¹ˆä¸€ç‚¹æ€§èƒ½æ¶ˆè€—
				let GWorld = 0; //ä¸–ç•Œå…¨å±€å˜é‡ï¼Œå…¬ç”¨
		
				function drawCache() {
					if (isNull(GWorld)) return;
					const Level = readLong(GWorld + 0xF8); //Level* PersistentLevel
					const ActorArray = readLong(Level + 0x98);
					const ActorCount = readInt(Level + 0x98+8);
					
					//drawText(`å¯¹è±¡æ•°é‡: ${ActorCount}`, sWidth / 5, sHeight / 5, 22, "red", "center", true);
					
					const tempArr = [];
					//éå†
					for (let i = 0; i < ActorCount; i++) {
						const actor = readLong(ActorArray + i * 8); // + 0x10
						if (isNull(actor)) continue;
						const HPmax = readFloat(readLong(actor + 0xE18)+0x210); //float HealthMax;	
						if (HPmax == 100) {
							tempArr.push(actor);
						}
					}
					actorCache = tempArr;
				}
		
				function shadowDraw() {
					clearCtx();
					//ä¸–ç•Œåœ°å€
					GWorld = readLong(baseAddr + 0xf3246b8);
					if (isNull(GWorld)) return;
					//è·å–è‡ªå·±
					const NetDriver = readLong(GWorld + 0x30); 
					const ServerConnection = readLong(NetDriver + 0x88); 
					const localPlayerController = readLong(ServerConnection + 0x30);

					const STE = readLong(localPlayerController + 0x3A0);

					const StatePoint = readLong(STE + 0x390);
					const Team1 = readInt(StatePoint + 0x62C);
					const Team2 = readInt(StatePoint + 0x630);
					
					const playerCameraManager = readLong(localPlayerController + 0x408); 

					if (isNull(playerCameraManager)) return;
					const povAddr = playerCameraManager + 0x1790; 
					const camViewInfo = {
						Location: {
							X: readFloat(povAddr),
							Y: readFloat(povAddr + 4),
							Z: readFloat(povAddr + 8)
						},
						Rotation: {
							Pitch: readFloat(povAddr + 0xc),
							Yaw: readFloat(povAddr + 0xc+4),
							Roll: readFloat(povAddr + 0xc+8)
						},
						FOV: readFloat(povAddr + 0x18)
					}
					//é›·è¾¾ï¼Œè·å–ç›¸æœºæ—‹è½¬è§†è§’
					let camAngle = camViewInfo.Rotation.Yaw;
					//ä¸€å¸§åªè®¡ç®—ä¸€æ¬¡ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—
					const tempMatrix = RotatorToMatrix(camViewInfo.Rotation);
		
					let playerCout = 0;
					let ai = 0;
					let topEnemy = 0;
					let vehicle = 0;
		
					let zmiaozjjl = 9999;
					let actorbone = 0;
		
					var D2Dtemp = [];
		
					for (let i = 0; i < actorCache.length; i++) {
						//æ’é™¤è‡ªå·±
						const actor = actorCache[i];
						if (STE == actor) continue;
	
						//æ’é™¤é˜Ÿå‹
						const team = readInt(readLong(actor + 0x390) + 0x62C); 
						const team1 = readInt(readLong(actor + 0x390) + 0x62C); 
						const team2 = readInt(readLong(actor + 0x390) + 0x630); 
						
						if (team1 == Team1 || team2 == Team2) continue;
						
						//æœ€å¤§ç”Ÿå‘½å€¼
						const hpmax = readFloat(readLong(actor + 0xE18)+0x210);	
						//è·å–ç”Ÿå‘½å€¼
						const hp = readFloat(readLong(readLong(actor + 0xE18)+0x238)+0x40);
						if (hp == 0) continue;
						const renhp = hp;
						//è·å–äººç‰©çŠ¶æ€
						const StatusOffset = readInt(actor + 0x1378); 
						
						const rootComponent = readLong(actor + 0x180);
						if (isNull(rootComponent)) continue;
						const worldPos = {
							X: readFloat(rootComponent + 0x220),
							Y: readFloat(rootComponent + 0x224),
							Z: readFloat(rootComponent + 0x228)
						}
		
						//è®¡ç®—è·ç¦»
						const distX = (worldPos.X - camViewInfo.Location.X) / 100;
						const distY = (worldPos.Y - camViewInfo.Location.Y) / 100;
						let distance = (distX * distX) + (distY * distY);
						const distZ = (worldPos.Z - camViewInfo.Location.Z) / 100;
						distance = Math.ceil(Math.sqrt((distZ * distZ) + distance));
						//æ•Œäººyaw  å•ä½ï¼šè§’åº¦
						const angleOffset = readFloat(actor + 0xa64);
						//é›·è¾¾è·å–æ•Œäººä¸–ç•Œåæ ‡
						const wradPos = {
							X: distX,
							Y: distY,
							dist: distance
						};
						const wAngle = (180.0 / Math.PI) * Math.atan2(wradPos.Y, wradPos.X); //é›·è¾¾ï¼Œè§’åº¦ç›¸å…³
						const Angle = camAngle - wAngle + 90; //é›·è¾¾ï¼Œè§’åº¦ç›¸å…³
						const towards = angleOffset - camAngle - 90; //é›·è¾¾æ•Œäººè§†è§’æœå‘
		
						//é›·è¾¾è·å–æ•Œäººå±å¹•åæ ‡
						const radPos = {
							X: wradPos.dist * Math.cos(Angle / 180.0 * Math.PI),
							Y: wradPos.dist * Math.sin(Angle / 180.0 * Math.PI)
						};
		
						const zb1 = {
							X: worldPos.X,
							Y: worldPos.Y,
							Z: worldPos.Z + 80.0
						}
		
						const zb2 = {
							X: worldPos.X,
							Y: worldPos.Y,
							Z: worldPos.Z - 88.0
						}
		
						//é¡¶éƒ¨æ–¹æ¡†çº¿
						const fkzb1 = world2Screen(zb1, camViewInfo, tempMatrix);
						//åº•éƒ¨æ–¹æ¡†çº¿
						const fkzb2 = world2Screen(zb2, camViewInfo, tempMatrix);
						const fkgao = fkzb2.Y - fkzb1.Y;
						const fkkuan = fkgao / 2;
		
						if (!app.zmiaoanj) {
							dx = Math.abs(sWidth / 2 - fkzb1.X);
							dy = Math.abs(sHeight / 2 - fkzb1.Y);
							var d2ddis = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
							if (zmiaozjjl > d2ddis) {
								zmiaozjjl = d2ddis;
								actorbone = actor;
							}
						}
		
						//æ‰‹æŒæªæ¢°
						const lastUpdateStatusKeyListOffset = 0x2c38; //LastUpdateStatusKeyList
						const equipWeaponOffset = 0x20; //STExtraWeapon* EquipWeapon
						const weaponOffset = lastUpdateStatusKeyListOffset + equipWeaponOffset;
						const weaponIDOffset = 0x9f9; //int RepWeaponID
						const my_weapon = readLong(actor + weaponOffset);
						const weaponid = readInt(my_weapon + weaponIDOffset);

						//è‡ªç„ç»˜å›¾
				if (app.checkboxList.isZimiao) {
				    //åœ†åœˆ
				    drawCircular(sWidth / 2, sHeight / 2, 100, app.zimiaodx, "red", 1, false);
				if (objectInfo.dis <= app.zimiaojl && objectInfo.x > 0 && objectInfo.y > 0 && objectInfo.x  < sWidth && objectInfo.y < sHeight) {
				    //çº¿æ¡
					drawLine(objectInfo.toux, objectInfo.touy, sWidth / 2, sHeight / 2, "aqua", 2);
					}
				}
		
						if (1) {
							const bIsAI = team2; //bool bIsAI
							//ä¼å…µè®¡æ•°
							if (StatusOffset == 33554448 || StatusOffset == 33554449) topEnemy += 1;
							//è¯»åå­—å¯èƒ½æ¶ˆè€—æ€§èƒ½ï¼Œä¸éœ€è¦æ³¨é‡Šå³å¯â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸
							//åªå¯¹ç»å…¸é£æ ¼ç”Ÿæ•ˆ
							//PlayerName
							let name = "";
							if (app.checkboxList.isInfo) {
								//è¶…å‡ºå±å¹•ä¸è®¡ç®—
								if (fkzb1.X > 0 && fkzb1.Y > 0 && fkzb1.X < sWidth && fkzb1.Y < sHeight) {
									const nameAddr = readLong(readLong(actor + 0x390)+0x470);
									name = nameAddr.toString(16);
									if (!isNull(nameAddr)) {
										name = "";
										for (let s = 0; s < 14; s++) {
											const after = Number(h5gg.getValue(nameAddr + s * 2, "U8")).toString(16).padStart(2, '0');
											const before = Number(h5gg.getValue(nameAddr + s * 2 + 1, "U8")).toString(16).padStart(2,
												'0');
											const charCode = before + after;
											if (charCode == "0000") break;
											name += String.fromCharCode(parseInt(charCode, 16));
										}
									}
								}
							}
							//è¯»åå­—å¯èƒ½æ¶ˆè€—æ€§èƒ½ï¼Œä¸éœ€è¦æ³¨é‡Šå³å¯â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸
		
							/***************éª¨éª¼å‡½æ•°*******************/
							
		
							//è®°å½•è¦ç»˜åˆ¶çš„å…¨éƒ¨ä¿¡æ¯
							const actorInfo = {
								x: fkzb1.X, //xåæ ‡
								y: fkzb1.Y, //yåæ ‡
								w: fkkuan, //å®½
								h: fkgao, //é«˜
						      hp: renhp, //ç”Ÿå‘½å€¼
								isAI: bIsAI, //æ˜¯å¦ä¸ºæœºå™¨äºº
								team: team, //é˜Ÿä¼
								name: name, //åå­—
								dis: distance, //è·ç¦»
								weaponid: weaponid, //æ‰‹æŒæªæ¢°
								
								towards: towards, //äººç‰©æœå‘
								zt: StatusOffset, //äººç‰©çŠ¶æ€
							
								localPlayer: localPlayerController, //æœ¬äººåœ°å€
		
								//3dx
								
		
							};
							if (distance < app.dis) { //å¯è°ƒç»˜åˆ¶èŒƒå›´
								shadowInfo(actorInfo);
							}
							if (bIsAI) {
								ai++;
							} else {
								playerCout++;
							}
						}
					}
		
					if (topEnemy > 0) {
						drawText(`âŒç©ºé™æ•Œäºº: ${topEnemy}`, sWidth / 2, sHeight / 8, 22, "yellow", "center", true);
					}
					//äººæ•°ç»Ÿè®¡
					//drawRoundRect(sWidth / 2 - 90, 0 + app.renshu, 180, 38, 20, 'rgba(255,255,255,0.5)', true); //åˆ©ç”¨åœ†è§’çŸ©å½¢å¡«å……
					if (playerCout + ai > 0) {
						drawText("ğŸš¨", sWidth / 2, -30 + app.renshu, 25, "white", "center", true);
					}
					if (playerCout + ai < 1) {
						drawText("âœ”", sWidth / 2, -30 + app.renshu, 25, "white", "center", true);
					}
					drawText("ğŸ•´", sWidth / 2 - 60, -25 + app.renshu, 25, "white", "center", true);
					drawText("ğŸ‘½", sWidth / 2 + 62, -25 + app.renshu, 25, "white", "center", true);
					//çœŸäººæ€»æ•°
					drawText(playerCout, sWidth / 2 - 30, -20 + app.renshu, 20, playerCout > 0 ? "#f00" : "white", "center", true);
					//äººæœºæ€»æ•°
					drawText(ai, sWidth / 2 + 32, -20 + app.renshu, 20, ai > 0 ? "lime" : "white", "center", true);
					
					//drawText(`åæ ‡X: ${worldPos.X}`, sWidth / 2, sHeight / 2, 22, "red", "center", true);
		
		
		
		
		
		
				}
		
		
				function shadowInfo(objectInfo) {
					//äººæœºåˆ¤æ–­ æ˜¯çš„è¯å¯¹æ ‡å˜ä¸ºAI
					if (objectInfo.isAI) objectInfo.team = "AI";
		
		
		
		
					//å°„çº¿
					if (app.checkboxList.isLine) {
						color = "white";
						if (objectInfo.isAI) color = "#28ff1d";
						
						if (objectInfo.hp > 0) {
							
								drawLine(sWidth / 2, 34 + app.renshu, objectInfo.x, objectInfo.y - 44, color, 1);
							
						}
					}
		
		
					//è¶…å‡ºå±å¹•åªç»˜åˆ¶å°„çº¿ èƒŒæ•Œ
					if (objectInfo.x < 0 || objectInfo.y < 0 || objectInfo.x > sWidth || objectInfo.y > sHeight) {
						// èƒŒæ•Œ
						if (app.checkboxList.isBeid) {
							if (objectInfo.x < 0) objectInfo.x = 20;
							if (objectInfo.y < 0) objectInfo.y = 20;
							if (objectInfo.x > sWidth) objectInfo.x = sWidth - 20;
							if (objectInfo.y > sHeight) objectInfo.y = sHeight - 20;
							drawCircular(objectInfo.x, objectInfo.y, 100, 15, objectInfo.isAI ? "rgba(0,255,0,0.6)" :
								"rgba(255,0,0,0.6)", true);
							drawText(`${objectInfo.dis}m`, objectInfo.x, objectInfo.y - 16, 10, "white", "center", true);
						}
						return
					}
		
					
						//æ–¹æ¡†
						if (app.checkboxList.isBox) {
						drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <=
									0 ? "yellow" : "#00ffff", false);
						} 
						
						//éª¨éª¼
				
		
						//è·ç¦»
						if (app.checkboxList.isDis) {
							drawText("[" + objectInfo.dis + "m]", objectInfo.x, objectInfo.y - 53, 10, "97ffff", "right", true);
						}
		
						//ä¿¡æ¯
						if (app.checkboxList.isInfo) {
							const teamcolor = app.teamcolor[objectInfo.team];
							//å€’ä¸‰è§’å½¢ å¼€å§‹ç‚¹ï¼Œx,y é€”å¾„ï¼Œx,y ç»ˆç‚¹ï¼Œx,y
							drawTriangle(objectInfo.x - 3, objectInfo.y - 12, objectInfo.x, objectInfo.y - 6, objectInfo.x + 3,
								objectInfo.y - 12, teamcolor, 0.5, true);
							//é˜Ÿæ ‡èƒŒæ™¯
							drawRectangle(objectInfo.x - 46, objectInfo.y - 29, 16, 14, teamcolor, 0.8, true);
							//åå­—èƒŒæ™¯
							drawRectangle(objectInfo.x - 30, objectInfo.y - 29, 75, 14, teamcolor, 0.5, true);
							//é˜Ÿæ ‡æ–‡å­—
							drawText(objectInfo.team, objectInfo.x - 38, objectInfo.y - 38, 10, "#FFF", "center", true);
							//åå­—æ–‡å­—
							if (objectInfo.name.length > 7) objectInfo.name = `${objectInfo.name.slice(0, 6)}...`
							drawText(objectInfo.name, objectInfo.x + 8, objectInfo.y - 38, 10, "#FFF", "center", true);
						}
		
						//è¡€é‡
						if (app.checkboxList.isHP) {
							//ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œèµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œåœ†è§’åŠå¾„ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
		
							drawRect(objectInfo.x - 46, objectInfo.y - 15, 91, 3,  "rgba(0,0,0,0.4)", true);
							drawRect(objectInfo.x - 46, objectInfo.y - 15, Math.ceil(objectInfo.hp / 1.1), 3,  objectInfo.hp <= 30 ? "rgba(255,0,0,0.8)" : "rgba(255,255,255,0.8)", true);
						}
		
					
						//æ‰‹æŒ
						if (0) {
							
							const shouchi = app.shouchi[objectInfo.weaponid];
							if (objectInfo.hp > 0) {
								drawText("[è¿˜æ²¡å†™]", objectInfo.x, objectInfo.y - 53, 10, "97ffff", "left", true);
							} else if (objectInfo.hp <= 0) {
								drawText("[å€’åœ°]", objectInfo.x, objectInfo.y - 53, 10, "97ffff", "left", true);
							}
						}					
				}
		
				//********************* è¿½è¸ªç›¸å…³ ****************
		
	
		
				// ********************* ç»˜å›¾ç›¸å…³ *********************
		
				//æ¸…ç©ºç”»å¸ƒ
				function clearCtx() {
					ctx.clearRect(0, 0, canvasDom.width, canvasDom.height);
				}
		
				//è®¾ç½®çº¿å®½
				function setLineWidth(w) {
					ctx.lineWidth = w;
				}
		
				//ç»˜åˆ¶å›¾ç‰‡æµ‹è¯•
				function circleImgTwo(img, x, y, w, h) {
					x *= iosScale;
					y *= iosScale;
					w *= iosScale;
					h *= iosScale;
					ctx.globalAlpha = 0.8;
					ctx.drawImage(img, x, y, w, h);
				}
		
				//ç»˜åˆ¶åœ†å½¢å¸¦ç®­å¤´ ä¸­å¿ƒç‚¹xy,åŠå¾„, ç®­å¤´æ—‹è½¬è§’åº¦, åœ†å½¢é¢œè‰²ï¼Œç®­å¤´é¢œè‰²ï¼ˆé›·è¾¾ç‚¹æœå‘ï¼‰
				function drawCMark(x, y, radius, angle, cColor, dColor) {
					x *= iosScale;
					y *= iosScale;
					radius *= iosScale;
		
					var startAngle = (Math.PI / 180) * (-30 + angle);
					var endAngle = (Math.PI / 180) * (30 + angle);
		
					//åœ†å½¢
					ctx.beginPath();
					ctx.fillStyle = cColor;
					ctx.arc(x, y, radius, 0, 360, false);
					ctx.fill();
					ctx.closePath();
		
					//ç®­å¤´
					ctx.beginPath();
					ctx.fillStyle = dColor;
					ctx.arc(x, y, radius + radius * 0.15, startAngle, endAngle, false);
		
					var rx = x + (x + radius * 1.7 - x) * Math.cos(angle * Math.PI / 180) - (y - y) * Math.sin(angle * Math.PI / 180);
					var ry = y + (x + radius * 1.7 - x) * Math.sin(angle * Math.PI / 180) + (y - y) * Math.cos(angle * Math.PI / 180);
		
					ctx.lineTo(rx, ry);
					ctx.fill();
					ctx.closePath();
				}
		
				//ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œèµ·å§‹ç‚¹xyï¼Œç»ˆç‚¹xyï¼Œé¢œè‰²ï¼Œé€æ˜åº¦ï¼Œæ˜¯å¦å¡«å……
				function drawTriangle(x1, y1, x2, y2, x3, y3, color, globalAlpha, isFill = true) {
					x1 *= iosScale;
					y1 *= iosScale;
					x2 *= iosScale;
					y2 *= iosScale;
					x3 *= iosScale;
					y3 *= iosScale;
		
					//ä¸‰è§’å½¢
					ctx.beginPath(); //å¼€å§‹ç»˜åˆ¶
					ctx.strokeStyle = color;
					ctx.fillStyle = color;
					ctx.globalAlpha = globalAlpha;
					ctx.moveTo(x1, y1); //å¼€å§‹ç‚¹ï¼Œè®¾ç½®x,y
					ctx.lineTo(x2, y2); //é€”ç»ç‚¹ï¼Œè®¾ç½®x,y
					ctx.lineTo(x3, y3); //æœ€ç»ˆç‚¹ï¼Œè®¾ç½®x,y
					ctx.closePath(); //é—­åˆè·¯å¾„
					if (isFill) {
						ctx.fill(); //ç»˜åˆ¶å®å¿ƒ
					} else {
						ctx.stroke(); //ç»˜åˆ¶ç©ºå¿ƒ
					}
				}
		
				//ç»˜åˆ¶å¯¹è§’çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……ï¼ˆå¯¹è§’æ–¹æ¡†ï¼‰
				function drawMyRect(x, y, w, h, color, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					w *= iosScale;
					h *= iosScale;
		
					ctx.strokeStyle = color;
					ctx.lineWidth = app.xian;
		
					ctx.beginPath();
		
					ctx.moveTo(x, y);
					ctx.lineTo(Number(x) + Number(w) / 6, y);
					ctx.closePath();
		
					ctx.moveTo(x, y);
					ctx.lineTo(x, Number(y) + Number(h / 6));
					ctx.closePath();
		
					ctx.moveTo(Number(x) + Number(w) - Number(w) / 6, y);
					ctx.lineTo(Number(x) + Number(w), y);
					ctx.closePath();
		
					ctx.moveTo(Number(x) + Number(w), y);
					ctx.lineTo(Number(x) + Number(w), Number(y) + Number(h / 6));
					ctx.closePath();
		
					ctx.moveTo(Number(x), Number(y) + Number(h));
					ctx.lineTo(Number(x), Number(y) + Number(h) - Number(h / 6));
					ctx.closePath();
		
					ctx.moveTo(Number(x), Number(y) + Number(h));
					ctx.lineTo(Number(x) + Number(w) / 6, Number(y) + Number(h));
		
					ctx.moveTo(Number(x) + Number(w), Number(y) + Number(h));
					ctx.lineTo(Number(x) + Number(w) - (w / 6), Number(y) + Number(h));
		
					ctx.moveTo(Number(x) + Number(w), Number(y) + Number(h));
					ctx.lineTo(Number(x) + Number(w), Number(y) + Number(h) - Number(h / 6));
					ctx.closePath();
					ctx.stroke();
				}
		
			
		
				//ç»˜åˆ¶çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œé€æ˜åº¦ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢ï¼ˆé˜Ÿæ ‡ã€åå­—èƒŒæ™¯ï¼‰
				function drawRectangle(x, y, w, h, color, transparency, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					w *= iosScale;
					h *= iosScale;
		
					ctx.beginPath();
					ctx.fillStyle = color;
					ctx.globalAlpha = transparency;
					ctx.fillRect(x, y, w, h, );
					ctx.closePath();
				}
		
				//ç»˜åˆ¶çº¿æ¡ï¼Œèµ·å§‹ç‚¹xyï¼Œç»ˆç‚¹xyï¼Œé¢œè‰²ï¼ˆé›·è¾¾çº¿æ¡ã€å°„çº¿ã€3Dæ¡†çº¿æ¡ï¼‰
				function drawLine(x1, y1, x2, y2, color, lineWidth) {
					x1 *= iosScale;
					y1 *= iosScale;
					x2 *= iosScale;
					y2 *= iosScale;
		
					ctx.beginPath();
					ctx.lineWidth = lineWidth;
					ctx.fillStyle = color;
					ctx.strokeStyle = color;
					ctx.moveTo(x1, y1);
					ctx.lineTo(x2, y2);
					ctx.stroke();
					ctx.closePath();
				}
		
				//ç»˜åˆ¶åœ†å½¢ èµ·ç‚¹xyï¼Œåœ†å½¢å¼§åº¦ï¼Œå¤§å°ï¼Œé¢œè‰²ï¼Œçº¿å®½ï¼Œæ˜¯å¦å¡«å……ï¼ˆç®€æ´é£æ ¼è¡€æ¡ã€é›·è¾¾ã€èƒŒæ•Œï¼‰
				function drawCircular(x, y, num, size, color, lineWidth, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					size *= iosScale;
		
					if (num === 100) num = 1;
					else if (num > 0) num = 1 - num / 100;
					const d2a = n => n * Math.PI / 180;
		
					ctx.beginPath();
					ctx.lineWidth = lineWidth;
					ctx.arc(x, y, size, d2a(num * 360 - 90), d2a(-90), false);
					if (isFill) {
						ctx.fillStyle = color;
						ctx.fill();
					} else {
						ctx.strokeStyle = color;
						ctx.stroke();
					}
					ctx.closePath();
				}
		
				//ç»˜åˆ¶çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢ (æ–¹æ¡†)
				function drawRect(x, y, w, h, color, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					w *= iosScale;
					h *= iosScale;
		
					ctx.beginPath();
					ctx.lineWidth = app.xian;
					ctx.strokeStyle = color;
					ctx.fillStyle = color;
					ctx.globalAlpha = 1;
					if (isFill) {
						ctx.fillRect(x, y, w, h);
					} else {
						ctx.strokeRect(x, y, w, h);
					}
					ctx.closePath();
				}
		
				//ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œèµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œåœ†è§’åŠå¾„ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
				function drawRoundRect(x, y, w, h, r, color, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					w *= iosScale;
					h *= iosScale;
					r *= iosScale;
		
					ctx.beginPath();
					ctx.strokeStyle = color;
					ctx.fillStyle = color;
					ctx.globalAlpha = 1;
					if (w < 2 * r) r = w / 2;
					if (h < 2 * r) r = h / 2;
					ctx.beginPath();
					ctx.moveTo(x + r, y);
					ctx.arcTo(x + w, y, x + w, y + h, r);
					ctx.arcTo(x + w, y + h, x, y + h, r);
					ctx.arcTo(x, y + h, x, y, r);
					ctx.arcTo(x, y, x + w, y, r);
					if (isFill) {
						ctx.fill();
					} else {
						ctx.stroke();
					}
					ctx.closePath();
				}
		
				//ç»˜åˆ¶æ–‡å­—ï¼Œæ–‡å­—å†…å®¹ï¼Œèµ·ç‚¹xyï¼Œæ–‡å­—å¤§å°ï¼Œæ–‡å­—å¯¹é½ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……æ–‡å­—
				function drawText(text, x, y, size, color, textAlign, isFill = true) {
					x *= iosScale;
					y *= iosScale;
					size *= iosScale;
		
					ctx.beginPath();
					ctx.globalAlpha = 1; //é€æ˜åº¦
					ctx.textAlign = textAlign; //æ–‡å­—å¯¹é½
					ctx.fillStyle = color;
					ctx.strokeStyle = color;
					ctx.font = size + 'px' + fontFamily;
					if (isFill) {
						ctx.fillText(text, x, y + size);
					} else {
						ctx.strokeText(text, x, y + size);
					}
					ctx.closePath();
				};
		
				// ********************* å†…å­˜ç›¸å…³ *********************
				function readInt(addr) {
					return Number(h5gg.getValue(addr, "I32"));
				}
		
				function readLong(addr) {
					return Number(h5gg.getValue(addr, "I64"));
				}
		
				function readFloat(addr) {
					return Number(h5gg.getValue(addr, "F32"));
				}
		
				function isNull(addr) {
					return (addr < 0x100000000 || addr > 0x300000000);
				}
		
				// ********************* UE4ç›¸å…³ *********************
				function RotatorToMatrix(rotation) {
					var radPitch = rotation.Pitch * (Math.PI / 180.0);
					var radYaw = rotation.Yaw * (Math.PI / 180.0);
					var radRoll = rotation.Roll * (Math.PI / 180.0);
		
					var SP = Math.sin(radPitch);
					var CP = Math.cos(radPitch);
					var SY = Math.sin(radYaw);
					var CY = Math.cos(radYaw);
					var SR = Math.sin(radRoll);
					var CR = Math.cos(radRoll);
		
					var matrix = new Array(16).fill(0);
		
					matrix[0] = (CP * CY);
					matrix[1] = (CP * SY);
					matrix[2] = (SP);
					matrix[3] = 0;
		
					matrix[4] = (SR * SP * CY - CR * SY);
					matrix[5] = (SR * SP * SY + CR * CY);
					matrix[6] = (-SR * CP);
					matrix[7] = 0;
		
					matrix[8] = (-(CR * SP * CY + SR * SY));
					matrix[9] = (CY * SR - CR * SP * SY);
					matrix[10] = (CR * CP);
					matrix[11] = 0;
		
					matrix[12] = 0;
					matrix[13] = 0;
					matrix[14] = 0;
					matrix[15] = 1;
		
					return matrix;
				}
		
				function vectorDot(lhs, rhs) {
					return (((lhs.X * rhs.X) + (lhs.Y * rhs.Y)) + (lhs.Z * rhs.Z));
				}
		
				function world2Screen(worldLocation, camViewInfo, tempMatrix) {
					// var tempMatrix = RotatorToMatrix(camViewInfo.Rotation);
		
					var vAxisX = {
						X: tempMatrix[0],
						Y: tempMatrix[1],
						Z: tempMatrix[2]
					};
		
					var vAxisY = {
						X: tempMatrix[4],
						Y: tempMatrix[5],
						Z: tempMatrix[6]
					};
		
					var vAxisZ = {
						X: tempMatrix[8],
						Y: tempMatrix[9],
						Z: tempMatrix[10]
					};
		
					var vDelta = {
						X: worldLocation.X - camViewInfo.Location.X,
						Y: worldLocation.Y - camViewInfo.Location.Y,
						Z: worldLocation.Z - camViewInfo.Location.Z
					};
		
					var vTransformed = {
						X: vectorDot(vDelta, vAxisY),
						Y: vectorDot(vDelta, vAxisZ),
						Z: vectorDot(vDelta, vAxisX)
					};
		
					if (vTransformed.Z < 1.0) {
						vTransformed.Z = 1.0;
					}
		
					var fov = camViewInfo.FOV;
					var screenCenterX = (sWidth / 2.0);
					var screenCenterY = (sHeight / 2.0);
		
					var re = {
						X: (screenCenterX + vTransformed.X * (screenCenterX / Math.tan(fov * (Math.PI / 360.0))) / vTransformed
							.Z),
						Y: (screenCenterY - vTransformed.Y * (screenCenterX / Math.tan(fov * (Math.PI / 360.0))) / vTransformed.Z)
					};
		
					return re;
				};
		
	
				cacheTimer = setInterval(function() {
					drawCache();
				}, 3000); //ä¸€ç§’ç¼“å­˜ä¸€æ¬¡
		
				drawTimer = setInterval(function() {
					if (app.checkboxList.isDraw == '1') {
						//console.log("1");
						shadowDraw();
		
						//è®¡ç®—FPS
						if (!window.fpscount) window.fpscount = 0;
						if (!window.fpstime) window.fpstime = performance.now();
						window.fpscount++;
						if ((performance.now() - window.fpstime) > 2000) {
							window.fps = window.fpscount;
							window.fpstime = performance.now();
							window.fpscount = 0;
						}
						ctx.textBaseline = "top";
						ctx.textAlign = "center";
						ctx.font = '40px "Arial, sans-serif"';
						ctx.fillStyle = "aqua";
		
						if (window.fps) ctx.fillText("FPS: " + window.fps, 150, 50);
					} else {
						clearCtx();
					}
				}, app.fps);
	</script>
</html>